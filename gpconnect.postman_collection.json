{
	"info": {
		"_postman_id": "5073139d-be38-43bf-9233-3b6825dadf89",
		"name": "GP Connect",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "v0.5.0",
			"item": [
				{
					"name": "Foundations",
					"item": [
						{
							"name": "Get conformance profile",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "913855c4-778b-4924-b414-ec3de45cbfa7",
										"exec": [
											"// Get patient NHS Number from environment variables",
											"var patient_nhs_number = pm.environment.get(\"patient_nhs_number\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": \"https://authorize.fhir.nhs.net/token\",",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_record\": {",
											"    \"resourceType\": \"Patient\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/Id/nhs-number\",",
											"        \"value\": patient_nhs_number",
											"      }",
											"    ]",
											"  },",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"practitionerRole\": [",
											"      {",
											"        \"role\": {",
											"          \"coding\": [",
											"            {",
											"              \"system\": \"http://fhir.nhs.net/ValueSet/sds-job-role-name-1\",",
											"              \"code\": \"AssuranceJobRole\"",
											"            }",
											"          ]",
											"        }",
											"      }",
											"    ],",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      }",
											"    ],",
											"    \"name\": {",
											"      \"family\": [",
											"        \"Demonstrator\"",
											"      ],",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json+fhir"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:read:metadata"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_0_5_x}}/metadata",
									"host": [
										"{{providerURL_0_5_x}}"
									],
									"path": [
										"metadata"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Access Record HTML",
					"item": [
						{
							"name": "Access Record HTML (Summary)",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "913855c4-778b-4924-b414-ec3de45cbfa7",
										"exec": [
											"// Get patient NHS Number from environment variables",
											"var patient_nhs_number = pm.environment.get(\"patient_nhs_number\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": \"https://authorize.fhir.nhs.net/token\",",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_record\": {",
											"    \"resourceType\": \"Patient\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/Id/nhs-number\",",
											"        \"value\": patient_nhs_number",
											"      }",
											"    ]",
											"  },",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"practitionerRole\": [",
											"      {",
											"        \"role\": {",
											"          \"coding\": [",
											"            {",
											"              \"system\": \"http://fhir.nhs.net/ValueSet/sds-job-role-name-1\",",
											"              \"code\": \"AssuranceJobRole\"",
											"            }",
											"          ]",
											"        }",
											"      }",
											"    ],",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      }",
											"    ],",
											"    \"name\": {",
											"      \"family\": [",
											"        \"Demonstrator\"",
											"      ],",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json+fhir"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:operation:gpc.getcarerecord"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json+fhir"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [{\n    \"name\": \"patientNHSNumber\",\n    \"valueIdentifier\": {\n      \"system\": \"http://fhir.nhs.net/Id/nhs-number\",\n      \"value\": \"{{patient_nhs_number}}\"\n    }\n  },\n  {\n    \"name\": \"recordSection\",\n    \"valueCodeableConcept\": {\n      \"coding\": [{\n        \"system\": \"http://fhir.nhs.net/ValueSet/gpconnect-record-section-1\",\n        \"code\": \"SUM\",\n        \"display\": \"Summary\"\n      }]\n    }\n  }]\n}"
								},
								"url": {
									"raw": "{{providerURL_0_5_x}}/Patient/$gpc.getcarerecord",
									"host": [
										"{{providerURL_0_5_x}}"
									],
									"path": [
										"Patient",
										"$gpc.getcarerecord"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Record HTML (Immunisations)",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1047beb4-6b45-4b2f-aec8-7a1bdc65267c",
										"exec": [
											"// Get patient NHS Number from environment variables",
											"var patient_nhs_number = pm.environment.get(\"patient_nhs_number\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": \"https://authorize.fhir.nhs.net/token\",",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_record\": {",
											"    \"resourceType\": \"Patient\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/Id/nhs-number\",",
											"        \"value\": patient_nhs_number",
											"      }",
											"    ]",
											"  },",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"practitionerRole\": [",
											"      {",
											"        \"role\": {",
											"          \"coding\": [",
											"            {",
											"              \"system\": \"http://fhir.nhs.net/ValueSet/sds-job-role-name-1\",",
											"              \"code\": \"AssuranceJobRole\"",
											"            }",
											"          ]",
											"        }",
											"      }",
											"    ],",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"http://fhir.nhs.net/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      }",
											"    ],",
											"    \"name\": {",
											"      \"family\": [",
											"        \"Demonstrator\"",
											"      ],",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json+fhir"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:operation:gpc.getcarerecord"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json+fhir"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [{\n    \"name\": \"patientNHSNumber\",\n    \"valueIdentifier\": {\n      \"system\": \"http://fhir.nhs.net/Id/nhs-number\",\n      \"value\": \"{{patient_nhs_number}}\"\n    }\n  },\n  {\n    \"name\": \"recordSection\",\n    \"valueCodeableConcept\": {\n      \"coding\": [{\n        \"system\": \"http://fhir.nhs.net/ValueSet/gpconnect-record-section-1\",\n        \"code\": \"IMM\",\n        \"display\": \"Immunisation\"\n      }]\n    }\n  }]\n}"
								},
								"url": {
									"raw": "{{providerURL_0_5_x}}/Patient/$gpc.getcarerecord",
									"host": [
										"{{providerURL_0_5_x}}"
									],
									"path": [
										"Patient",
										"$gpc.getcarerecord"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			]
		},
		{
			"name": "v1.2.2",
			"item": [
				{
					"name": "Foundations",
					"item": [
						{
							"name": "Get conformance profile",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "215f799f-41f0-4814-bbd8-497a4da56a18",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"organization/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:read:metadata-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/metadata",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"metadata"
									]
								}
							},
							"response": []
						},
						{
							"name": "Find a patient",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "6057b508-33f5-485e-9adb-4e2ad2f90ba7",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:search:patient-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Patient?identifier=https://fhir.nhs.uk/Id/nhs-number%7C{{patient_nhs_number}}",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Patient"
									],
									"query": [
										{
											"key": "identifier",
											"value": "https://fhir.nhs.uk/Id/nhs-number%7C{{patient_nhs_number}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Read a patient",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "bfad826e-281c-45fe-be4a-9e980177d95a",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:read:patient-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Patient/2",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Patient",
										"2"
									]
								}
							},
							"response": []
						},
						{
							"name": "Find a practitioner",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "7800396c-fe66-47c8-b121-cfaa67f2b48b",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"organization/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:search:practitioner-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Practitioner?identifier=https://fhir.nhs.uk/Id/sds-user-id%7CG22345655",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Practitioner"
									],
									"query": [
										{
											"key": "identifier",
											"value": "https://fhir.nhs.uk/Id/sds-user-id%7CG22345655"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Read a practitioner",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "158998dc-4e9b-4b84-a887-18aad275ec07",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"organization/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:read:practitioner-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Practitioner/2",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Practitioner",
										"2"
									]
								}
							},
							"response": []
						},
						{
							"name": "Find an organization",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "b2ce5d82-3ef8-4c17-ac58-0012a65b3cb5",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"organization/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:search:organization-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Organization?identifier=https://fhir.nhs.uk/Id/ods-organization-code%7CGPC001",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Organization"
									],
									"query": [
										{
											"key": "identifier",
											"value": "https://fhir.nhs.uk/Id/ods-organization-code%7CGPC001"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Read an organization",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "f258394d-57a4-49de-9cd2-41c1beb3b570",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"organization/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:read:organization-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Organization/1",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Organization",
										"1"
									]
								}
							},
							"response": []
						},
						{
							"name": "Read a location",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "a522440d-450a-4c67-b2a9-f709660afcf2",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"organization/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:read:location-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Location/1",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Location",
										"1"
									]
								}
							},
							"response": []
						},
						{
							"name": "Register a patient",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "7423bb96-63e8-48f3-90a4-faa9593332f4",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.write\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:operation:gpc.registerpatient-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Content-Type",
										"value": "application/fhir+json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"resourceType\": \"Parameters\",\r\n  \"parameter\": [\r\n    {\r\n      \"name\": \"registerPatient\",\r\n      \"resource\": {\r\n        \"resourceType\": \"Patient\",\r\n        \"extension\": [\r\n          {\r\n            \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-CareConnect-GPC-NHSCommunication-1\",\r\n            \"extension\": [\r\n              {\r\n                \"url\": \"interpreterRequired\",\r\n                \"valueBoolean\": false\r\n              },\r\n              {\r\n                \"url\": \"language\",\r\n                \"valueCodeableConcept\": {\r\n                  \"coding\": [\r\n                    {\r\n                      \"system\": \"https://fhir.nhs.uk/STU3/ValueSet/CareConnect-HumanLanguage-1\",\r\n                      \"code\": \"sk\"\r\n                    }\r\n                  ]\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        \"identifier\": [\r\n          {\r\n            \"extension\": [\r\n              {\r\n                \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-CareConnect-GPC-NHSNumberVerificationStatus-1\",\r\n                \"valueCodeableConcept\": {\r\n                  \"coding\": [\r\n                    {\r\n                      \"system\": \"https://fhir.nhs.uk/STU3/ValueSet/CareConnect-NHSNumberVerificationStatus-1\",\r\n                      \"code\": \"01\"\r\n                    }\r\n                  ],\r\n                  \"text\": \"Slovak\"\r\n                }\r\n              }\r\n            ],\r\n            \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",\r\n            \"value\": \"4071103582\"\r\n          }\r\n        ],\r\n        \"name\": [\r\n          {\r\n            \"use\": \"official\",\r\n            \"family\": \"Example\",\r\n            \"given\": [\r\n              \"Newly\",\r\n              \"Registered\"\r\n            ]\r\n          }\r\n        ],\r\n        \"telecom\": [\r\n          {\r\n            \"system\": \"email\",\r\n            \"value\": \"register.example@gpconnect.com\",\r\n            \"use\": \"home\"\r\n          },\r\n          {\r\n            \"system\": \"phone\",\r\n            \"value\": \"01251478956\",\r\n            \"use\": \"home\"\r\n          }\r\n        ],\r\n        \"gender\": \"other\",\r\n        \"birthDate\": \"2018-11-01\",\r\n        \"address\": [\r\n          {\r\n            \"use\": \"temp\",\r\n            \"line\": [\r\n              \"56 Treville Road\"\r\n            ],\r\n            \"city\": \"Leeds\",\r\n            \"postalCode\": \"LS13 4RB\",\r\n            \"country\": \"West Yorkshire\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Patient/$gpc.registerpatient",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Patient",
										"$gpc.registerpatient"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Appointments",
					"item": [
						{
							"name": "Amend an appointment",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "3ab82645-be00-4134-b20b-6ef95118d2df",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.write\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:update:appointment-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Content-Type",
										"value": "application/fhir+json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"resourceType\": \"Appointment\",\r\n  \"id\": \"6\",\r\n  \"meta\": {\r\n    \"versionId\": \"1541155171000\",\r\n    \"lastUpdated\": \"2018-11-02T10:39:31.000+00:00\",\r\n    \"profile\": [\r\n      \"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-Appointment-1\"\r\n    ]\r\n  },\r\n  \"extension\": [\r\n    {\r\n      \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-GPConnect-DeliveryChannel-2\",\r\n      \"valueCode\": \"In-person\"\r\n    },\r\n    {\r\n      \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-GPConnect-PractitionerRole-1\",\r\n      \"valueCodeableConcept\": {\r\n        \"coding\": [\r\n          {\r\n            \"system\": \"https://fhir.nhs.uk/STU3/ValueSet/GPConnect-PractitionerRole-1\",\r\n            \"code\": \"R0050\",\r\n            \"display\": \"Consultant\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ],\r\n  \"identifier\": [\r\n    {\r\n      \"system\": \"https://fhir.nhs.uk/Id/gpconnect-appointment-identifier\",\r\n      \"value\": \"5\"\r\n    }\r\n  ],\r\n  \"status\": \"booked\",\r\n  \"appointmentType\": {\r\n    \"coding\": [\r\n      {\r\n        \"system\": \"http://hl7.org/fhir/ValueSet/c80-practice-codes\",\r\n        \"code\": \"1\"\r\n      }\r\n    ],\r\n    \"text\": \"In-person\"\r\n  },\r\n  \"priority\": 0,\r\n  \"description\": \"A new amended description\",\r\n  \"start\": \"2018-11-02T15:54:02.262+00:00\",\r\n  \"end\": \"2018-11-02T16:23:59.802+00:00\",\r\n  \"minutesDuration\": 0,\r\n  \"slot\": [\r\n    {\r\n      \"reference\": \"Slot/419\"\r\n    }\r\n  ],\r\n  \"created\": \"2018-11-02T10:39:35+00:00\",\r\n  \"participant\": [\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Patient/1\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    },\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Location/1\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    },\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Practitioner/1\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Appointment/6",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Appointment",
										"6"
									]
								}
							},
							"response": []
						},
						{
							"name": "Retrieve a patients appointments",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "233a195b-e665-47c8-b316-2e0c4d56d07c",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											"",
											"",
											"// Setup search dates",
											"var paramStartTime = new Date();",
											"var paramEndTime = new Date(currentTime.getTime() + 259200000); // 3 days after current date",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_search_start_date\", paramStartTime.toISOString().split('T')[0]);",
											"pm.environment.set(\"pre_request_script_generated_search_end_date\", paramEndTime.toISOString().split('T')[0]);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:search:patient_appointments-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Patient/2/Appointment?start=ge{{pre_request_script_generated_search_start_date}}&start=le{{pre_request_script_generated_search_end_date}}",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Patient",
										"2",
										"Appointment"
									],
									"query": [
										{
											"key": "start",
											"value": "ge{{pre_request_script_generated_search_start_date}}"
										},
										{
											"key": "start",
											"value": "le{{pre_request_script_generated_search_end_date}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Search for free slots",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "8a67779f-9dc7-4f2e-87f1-df67942e09ef",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											"",
											"",
											"// Setup search dates",
											"var paramStartTime = new Date();",
											"var paramEndTime = new Date(currentTime.getTime() + 259200000); // 3 days after current date",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_search_start_date\", paramStartTime.toISOString());",
											"pm.environment.set(\"pre_request_script_generated_search_end_date\", paramEndTime.toISOString());",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:search:slot-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Slot?start=ge{{pre_request_script_generated_search_start_date}}&end=le{{pre_request_script_generated_search_end_date}}&status=free&_include=Slot:schedule&_include:recurse=Schedule:actor:Practitioner&_include:recurse=Schedule:actor:Location&searchFilter=https://fhir.nhs.uk/Id/ods-organization-code%7CGPC001&searchFilter=https://fhir.nhs.uk/STU3/ValueSet/GPConnect-OrganisationType-1%7Curgent care",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Slot"
									],
									"query": [
										{
											"key": "start",
											"value": "ge{{pre_request_script_generated_search_start_date}}"
										},
										{
											"key": "end",
											"value": "le{{pre_request_script_generated_search_end_date}}"
										},
										{
											"key": "status",
											"value": "free"
										},
										{
											"key": "_include",
											"value": "Slot:schedule"
										},
										{
											"key": "_include:recurse",
											"value": "Schedule:actor:Practitioner"
										},
										{
											"key": "_include:recurse",
											"value": "Schedule:actor:Location"
										},
										{
											"key": "searchFilter",
											"value": "https://fhir.nhs.uk/Id/ods-organization-code%7CGPC001"
										},
										{
											"key": "searchFilter",
											"value": "https://fhir.nhs.uk/STU3/ValueSet/GPConnect-OrganisationType-1%7Curgent care"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Read an appointment",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2ec45c1e-683f-4b86-b147-d2e91f467280",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:read:appointment-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Appointment/2",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Appointment",
										"2"
									]
								}
							},
							"response": []
						},
						{
							"name": "Book an appointment",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "302bf146-f7c2-48e4-aa60-6ed39ce3ec24",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.write\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:create:appointment-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Content-Type",
										"value": "application/fhir+json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"resourceType\": \"Appointment\",\r\n  \"meta\": {\r\n    \"profile\": [\r\n      \"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-Appointment-1\"\r\n    ]\r\n  },\r\n  \"contained\": [\r\n    {\r\n      \"resourceType\": \"Organization\",\r\n      \"id\": \"1\",\r\n      \"meta\": {\r\n        \"profile\": [\r\n          \"https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-GPC-Organization-1\"\r\n        ]\r\n      },\r\n      \"identifier\": [\r\n        {\r\n          \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",\r\n          \"value\": \"GPC001\"\r\n        }\r\n      ],\r\n      \"name\": \"Test Organization Name\",\r\n      \"telecom\": [\r\n        {\r\n          \"system\": \"phone\",\r\n          \"value\": \"0300 303 5678\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"extension\": [\r\n    {\r\n      \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-GPConnect-BookingOrganisation-1\",\r\n      \"valueReference\": {\r\n        \"reference\": \"Organisation/1\"\r\n      }\r\n    }\r\n  ],\r\n  \"status\": \"booked\",\r\n  \"appointmentType\": {\r\n    \"coding\": [\r\n      {\r\n        \"system\": \"http://hl7.org/fhir/ValueSet/c80-practice-codes\",\r\n        \"code\": \"408443003\",\r\n        \"display\": \"General medical practice\"\r\n      }\r\n    ]\r\n  },\r\n  \"description\": \"A test appointment\",\r\n  \"start\": \"2018-11-01T15:54:02.262+00:00\",\r\n  \"end\": \"2018-11-01T16:23:59.802+00:00\",\r\n  \"slot\": [\r\n    {\r\n      \"reference\": \"Slot/349\"\r\n    }\r\n  ],\r\n  \"created\": \"2018-11-01T15:54:02+00:00\",\r\n  \"participant\": [\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Patient/2\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    },\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Location/1\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Appointment",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Appointment"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cancel an appointment",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "3da3dbbc-6dc5-4891-9d2b-40a8f75cad3e",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.write\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:rest:update:appointment-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Content-Type",
										"value": "application/fhir+json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"resourceType\": \"Appointment\",\r\n  \"id\": \"8\",\r\n  \"meta\": {\r\n    \"versionId\": \"1541157030000\",\r\n    \"lastUpdated\": \"2018-11-02T11:10:30.000+00:00\",\r\n    \"profile\": [\r\n      \"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-Appointment-1\"\r\n    ]\r\n  },\r\n  \"extension\": [\r\n    {\r\n      \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-GPConnect-DeliveryChannel-2\",\r\n      \"valueCode\": \"In-person\"\r\n    },\r\n    {\r\n      \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-GPConnect-PractitionerRole-1\",\r\n      \"valueCodeableConcept\": {\r\n        \"coding\": [\r\n          {\r\n            \"system\": \"https://fhir.nhs.uk/STU3/ValueSet/GPConnect-PractitionerRole-1\",\r\n            \"code\": \"R0050\",\r\n            \"display\": \"Consultant\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"url\": \"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-GPConnect-AppointmentCancellationReason-1\",\r\n      \"valueString\": \"Free text cancellation reason.\"\r\n    }\r\n  ],\r\n  \"identifier\": [\r\n    {\r\n      \"system\": \"https://fhir.nhs.uk/Id/gpconnect-appointment-identifier\",\r\n      \"value\": \"8\"\r\n    }\r\n  ],\r\n  \"status\": \"cancelled\",\r\n  \"appointmentType\": {\r\n    \"coding\": [\r\n      {\r\n        \"system\": \"http://hl7.org/fhir/ValueSet/c80-practice-codes\",\r\n        \"code\": \"1\"\r\n      }\r\n    ],\r\n    \"text\": \"In-person\"\r\n  },\r\n  \"priority\": 0,\r\n  \"description\": \"A test appointment\",\r\n  \"start\": \"2018-11-02T11:19:35.000+00:00\",\r\n  \"end\": \"2018-11-02T11:19:35.000+00:00\",\r\n  \"minutesDuration\": 0,\r\n  \"slot\": [\r\n    {\r\n      \"reference\": \"Slot/700\"\r\n    }\r\n  ],\r\n  \"created\": \"2018-11-02T11:10:35+00:00\",\r\n  \"participant\": [\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Patient/1\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    },\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Location/1\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    },\r\n    {\r\n      \"actor\": {\r\n        \"reference\": \"Practitioner/1\"\r\n      },\r\n      \"status\": \"accepted\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Appointment/8",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Appointment",
										"8"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Access Record Structured",
					"item": [
						{
							"name": "Access Record Structured (Allergies and Medications)",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "b44ddfcc-58fa-4774-8c1f-83268e5f3ee7",
										"exec": [
											"var targetURI = pm.environment.get(\"providerURL_1_x_x\");",
											"",
											"var requesting_organization_ODS_Code = pm.environment.get(\"requesting_organization_ODS_Code\");",
											"",
											"// Construct the JWT token for the request",
											"var currentTime = new Date();",
											"var expiryTime = new Date(currentTime.getTime() + 300000); // 5 mins after current time",
											"var jwtCreationTime = Math.round(currentTime.getTime() / 1000);",
											"var jwtExpiryTime = Math.round(expiryTime.getTime() / 1000);",
											"",
											"var header = {",
											"  \"alg\": \"none\",",
											"  \"typ\": \"JWT\"",
											"};",
											"",
											"var payload = {",
											"  \"iss\": \"http://gpconnect-postman-url\",",
											"  \"sub\": \"1\",",
											"  \"aud\": targetURI,",
											"  \"exp\": jwtExpiryTime,",
											"  \"iat\": jwtCreationTime,",
											"  \"reason_for_request\": \"directcare\",",
											"  \"requested_scope\": \"patient/*.read\",",
											"  \"requesting_device\": {",
											"    \"resourceType\": \"Device\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"Web Interface\",",
											"        \"value\": \"Postman example consumer\"",
											"      }",
											"    ],",
											"    \"model\": \"Postman\",",
											"    \"version\": \"1.0\"",
											"  },",
											"  \"requesting_organization\": {",
											"    \"resourceType\": \"Organization\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"        \"value\": requesting_organization_ODS_Code",
											"      }",
											"    ],",
											"    \"name\": \"Postman Organization\"",
											"  },",
											"  \"requesting_practitioner\": {",
											"    \"resourceType\": \"Practitioner\",",
											"    \"id\": \"1\",",
											"    \"identifier\": [",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",",
											"        \"value\": \"G13579135\"",
											"      },",
											"      {",
											"        \"system\": \"https://fhir.nhs.uk/Id/sds-role-profile-id\",",
											"        \"value\": \"111111111\"",
											"      },",
											"    ],",
											"    \"name\": [{",
											"      \"family\": \"Demonstrator\",",
											"      \"given\": [",
											"        \"GPConnect\"",
											"      ],",
											"      \"prefix\": [",
											"        \"Mr\"",
											"      ]",
											"    }]",
											"  }",
											"};",
											"",
											"function base64url(source) {",
											"  // Encode in classical base64",
											"  encodedSource = CryptoJS.enc.Base64.stringify(source);",
											"  // Remove padding equal characters",
											"  encodedSource = encodedSource.replace(/=+$/, '');",
											"  // Replace characters according to base64url specifications",
											"  encodedSource = encodedSource.replace(/\\+/g, '-');",
											"  encodedSource = encodedSource.replace(/\\//g, '_');",
											"  return encodedSource;",
											"}",
											"",
											"// Encode the JWT data into the base64url encoded string",
											"var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
											"var encodedHeader = base64url(stringifiedHeader);",
											"var stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
											"var encodedPayload = base64url(stringifiedPayload);",
											"var jwtString = encodedHeader + \".\" + encodedPayload + \".\";",
											"",
											"// Set the environment variable used in the payload",
											"pm.environment.set(\"pre_request_script_generated_JWT\", jwtString);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/fhir+json"
									},
									{
										"key": "Ssp-From",
										"value": "{{ssp-from}}"
									},
									{
										"key": "Ssp-To",
										"value": "{{ssp-to}}"
									},
									{
										"key": "Ssp-InteractionID",
										"value": "urn:nhs:names:services:gpconnect:fhir:operation:gpc.getstructuredrecord-1"
									},
									{
										"key": "Ssp-TraceID",
										"value": "{{$guid}}"
									},
									{
										"key": "Content-Type",
										"value": "application/fhir+json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{pre_request_script_generated_JWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [\n  {\n\t\"name\": \"patientNHSNumber\",\n\t\"valueIdentifier\": {\n\t\t\"system\": \"https://fhir.nhs.uk/Id/nhs-number\",\n\t    \"value\": \"9658218873\"\n\t}\n  },\n  {\n    \"name\": \"includeAllergies\",\n    \"part\": [ {\n\t\t\"name\": \"includeResolvedAllergies\",\n\t    \"valueBoolean\": true\n\t}\n\t]\n  },\n  {\n\t\"name\": \"includeMedication\",\n\t\"part\": [\n\t{\n\t\t\"name\": \"includePrescriptionIssues\",\n\t    \"valueBoolean\": true\n\t},\n\t{\n\t\t\"name\": \"medicationSearchFromDate\",\n\t    \"valueDate\": \"1980-06-05\"\n\t}\n\t]\n  }\n  ]\n}\n\n\n"
								},
								"url": {
									"raw": "{{providerURL_1_x_x}}/Patient/$gpc.getstructuredrecord",
									"host": [
										"{{providerURL_1_x_x}}"
									],
									"path": [
										"Patient",
										"$gpc.getstructuredrecord"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			]
		}
	]
}